import{_ as R,r as g,a as h,c as C,o as U,b as r,w as a,d as t,u as q,e as d,f as u,g as F,m as _,l as c,h as w,E as x}from"./index-3Ry6G3R-.js";import{a as k}from"./mail-2KPGBgEm.js";const A={class:"register-container"},B={class:"card-header"},I={class:"register-footer"},N="@campus.mail",M={__name:"Register",setup(L){const P=q(),f=g(null),p=g(!1),s=h({username:"",emailPrefix:"",password:"",confirmPassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],emailPrefix:[{required:!0,message:"请输入邮箱账号",trigger:"blur"},{validator:(i,e,o)=>{e?/^[a-zA-Z0-9._-]+$/.test(e)?e.length<3||e.length>30?o(new Error("邮箱账号长度在 3 到 30 个字符")):o():o(new Error("邮箱账号只能包含字母、数字、点、下划线和连字符")):o(new Error("请输入邮箱账号"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(i,e,o)=>{e!==s.password?o(new Error("两次输入的密码不一致")):o()},trigger:"blur"}]},v=async()=>{var i,e;try{await f.value.validate(),p.value=!0,await k.register({username:s.username,email:s.emailPrefix+N,password:s.password}),x.success("注册成功，请登录"),P.push("/login")}catch(o){console.error("注册失败:",o),x.error(((e=(i=o.response)==null?void 0:i.data)==null?void 0:e.message)||"注册失败，请稍后重试")}finally{p.value=!1}};return(i,e)=>{const o=t("el-icon"),m=t("el-input"),n=t("el-form-item"),E=t("el-button"),y=t("router-link"),b=t("el-form"),z=t("el-card");return U(),C("div",A,[r(z,{class:"register-card"},{header:a(()=>[d("div",B,[r(o,{size:32,color:"#409EFF"},{default:a(()=>[r(u(_))]),_:1}),e[4]||(e[4]=d("h2",null,"注册账号",-1))])]),default:a(()=>[r(b,{model:s,rules:V,ref_key:"formRef",ref:f,"label-width":"0"},{default:a(()=>[r(n,{prop:"username"},{default:a(()=>[r(m,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),placeholder:"用户名","prefix-icon":u(F),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),r(n,{prop:"emailPrefix"},{default:a(()=>[r(m,{modelValue:s.emailPrefix,"onUpdate:modelValue":e[1]||(e[1]=l=>s.emailPrefix=l),placeholder:"邮箱账号","prefix-icon":u(_),size:"large"},{append:a(()=>[...e[5]||(e[5]=[d("span",{class:"email-suffix"},"@campus.mail",-1)])]),_:1},8,["modelValue","prefix-icon"])]),_:1}),r(n,{prop:"password"},{default:a(()=>[r(m,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=l=>s.password=l),type:"password",placeholder:"密码","prefix-icon":u(c),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(n,{prop:"confirmPassword"},{default:a(()=>[r(m,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>s.confirmPassword=l),type:"password",placeholder:"确认密码","prefix-icon":u(c),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(n,null,{default:a(()=>[r(E,{type:"primary",size:"large",style:{width:"100%"},loading:p.value,onClick:v},{default:a(()=>[...e[6]||(e[6]=[w(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1}),d("div",I,[e[8]||(e[8]=d("span",null,"已有账号？",-1)),r(y,{to:"/login"},{default:a(()=>[...e[7]||(e[7]=[w("立即登录",-1)])]),_:1})])]),_:1},8,["model"])]),_:1})])}}},$=R(M,[["__scopeId","data-v-5c360768"]]);export{$ as default};
